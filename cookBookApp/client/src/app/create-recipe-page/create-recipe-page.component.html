<div class="row" *ngIf="!loading; else preloader">
  <div class="col s12 margin-top-2rem">
    <a class="btn grey darken-4" routerLink="/">
      <i class="material-icons left">undo</i>
      Back to main
    </a>
  </div>
  <form
    class="col s12 margin-top-2rem"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
  >
    <div class="row">
      <div class="input-field col s12">
        <input
          id="title"
          type="text"
          formControlName="title"
          class="validate"
          [ngClass]="{'invalid': form.get('title').invalid && form.get('title').touched}"
        >
        <label for="title">Recipe title</label>
        <span
          *ngIf="form.get('title').invalid && form.get('title').touched"
          class="helper-text red-text"
        >
          Title can't be empty
        </span>
      </div>
      <div class="input-field col s12">
        <textarea
          id="textarea1"
          class="materialize-textarea "
          formControlName="description"
          [ngClass]="{'invalid': form.get('description').invalid && form.get('description').touched}"
        ></textarea>
        <label for="textarea1">Description</label>
        <span
          *ngIf="form.get('description').invalid && form.get('description').touched"
          class="helper-text red-text"
        >
          Description can't be empty
        </span>
      </div>
    </div>
    <button
      *ngIf="new; else edit"
      class="btn deep-purple accent-2"
      type="submit"
      [disabled]="form.invalid || disabled"
    >
      Create
    </button>
    <ng-template #edit>
      <button
        type="button"
        class="btn"
        [disabled]="form.invalid || disabled"
        (click)="onEdit()"
      >Edit</button>
      <button
        type="button"
        class="btn red delete-btn"
        (click)="onRemove()"
        [disabled]="disabled"
      >Delete</button>
    </ng-template>
  </form>
</div>
<ng-template #preloader>
  <app-preloader></app-preloader>
</ng-template>
